<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>⏳ @fizzwiz/awaitility</h1>
<blockquote>
<p>Essential utilities for asynchronous workflows.</p>
</blockquote>
<hr>
<h2>🌐 Overview</h2>
<p><code>@fizzwiz/awaitility</code> provides <strong>chainable, context-aware handlers</strong> for general data, DOM manipulation, and HTTP workflows.
It simplifies <strong>asynchronous operations</strong>, <strong>nested context navigation</strong>, and <strong>error handling</strong>, offering a clean, fluent API.</p>
<p>Business logic remains in focus: main operations are expressed as top-level code, while <strong>errors are thrown</strong> and can be handled via <code>.else()</code>.</p>
<hr>
<h2>⚡ Features</h2>
<ul>
<li>🛠 <strong>Handler</strong>: Base class for chainable asynchronous operations.</li>
<li>🌳 <strong>DomHandler</strong>: Chainable DOM navigation and async mutation.</li>
<li>📡 <strong>HttpHandler</strong>: Simplified HTTP request/response handling.</li>
<li>⏱ <strong>Async</strong>: Utilities for asynchronous workflows.</li>
<li>📨 <strong>Req / Res</strong>: Minimal request and response utilities.</li>
<li>🗂 <strong>Path</strong>: Utilities for working with nested objects or URLs.</li>
</ul>
<hr>
<h2>📦 Installation</h2>
<pre class="prettyprint source lang-bash"><code>npm install @fizzwiz/awaitility
</code></pre>
<hr>
<h2>🚀 Usage</h2>
<h3>🛠 Handler</h3>
<pre class="prettyprint source lang-js"><code>import { Handler } from &quot;@fizzwiz/awaitility&quot;;

const data = { user: { name: &quot;Alice&quot;, age: 25 } };

// Main business logic: declared first
const business = ctx => {
  // some computation
  ctx.user.age += 1;
  return ctx;
};

// Decorate the main business logic with checks and error handlings
const h = Handler.as(business)
  // Pre-execution check: happens BEFORE the business logic runs
  .checking(&quot;user.age&quot;)     // throws if the property is not defined
  .else((ctx, err) => console.error(&quot;❌ Error caught:&quot;, err));

// The handler is just an asynchronous function
const result = await h(data);

console.log(&quot;✅ Updated context:&quot;, result); // Output: { name: &quot;Alice&quot;, age: 26 }

</code></pre>
<hr>
<h3>🌳 DomHandler</h3>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;module&quot;>
import { DomHandler } from &quot;@fizzwiz/awaitility&quot;;

const business = async ctx => {
  // main computation with DOM context
  console.log(&quot;💻 Business logic running on&quot;, ctx);
  return ctx;
};

const validator = html => html.includes(&quot;snippet&quot;); // example validator

const h = DomHandler.as(business)
  // pre-execution setting: fetch HTML and set it to body.innerHTML
  .setting(&quot;body.innerHTML&quot;, async () => fetch(&quot;/snippet.html&quot;).then(r => r.text()))
  // post-execution check: verify the content
  .check(&quot;body.innerHTML&quot;, validator)
  // centralized error handling
  .else((ctx, err) => console.error(&quot;❌ Error caught:&quot;, err));

await h(document);

&lt;/script>
</code></pre>
<hr>
<h3>📡 HttpHandler</h3>
<pre class="prettyprint source lang-js"><code>import { HttpHandler, Res } from &quot;@fizzwiz/awaitility&quot;;

// Main computation
const business = async ctx => {
  console.log(&quot;💻 Business logic running with HTTP context:&quot;, ctx.req);
  return ctx;
};

// Validator for the token
const validator = token => typeof token === &quot;string&quot; && token.length > 0;

const h = HttpHandler.as(business)
  // pre-execution: ensure req.token is prepared (by extractin the token from the cookies, for example)
  .preparingToken()
  // post-execution: validate token
  .check(&quot;req.token&quot;, validator)
  // centralized error handling
  .else((ctx, err) => {
    console.error(&quot;❌ Error caught:&quot;, err);
    // Optionally send JSON response
    Res.json(ctx.res, 401, { error: err.message });
  });

// Run the handler with HTTP context
await h({ req, res });

</code></pre>
<hr>
<h2>📚 API Reference</h2>
<h3>🛠 Handler</h3>
<ul>
<li><code>with(path, creating = true, error?)</code> – Navigate into a nested object.</li>
<li><code>without(nsteps = 1)</code> – Step back in the path stack.</li>
<li><code>setting/set(path, value, creating = true, error?)</code> – Set property.</li>
<li><code>checking/check(path, validator?, error?)</code> – Check property.</li>
</ul>
<h3>🌳 DomHandler</h3>
<ul>
<li>Extends <code>Handler</code>.</li>
<li><code>with(selector, isQuery?, creating?, error?)</code> – Navigate DOM element by CSS selector.</li>
<li><code>setting/setAttr(attr, value, error?)</code> – Set attribute.</li>
<li><code>checking/checktAttr(attr, value, error?)</code> – Check attribute.</li>
</ul>
<h3>📡 HttpHandler</h3>
<ul>
<li>Extends <code>Handler</code>.</li>
<li><code>preparing/prepareBody()</code>, <code>preparing/prepareQuery()</code>, <code>preparing/prepareCookies()</code>, <code>preparing/prepareToken()</code></li>
<li>Errors are <strong>thrown</strong> and can be caught with <code>.else()</code> for selective recovery.</li>
</ul>
<hr>
<h2>🤝 Contributing</h2>
<p>Contributions, bug reports, and feature requests are welcome!
Please open issues or pull requests on the <a href="https://github.com/fizzwiz/awaitility">GitHub repository</a>.</p>
<hr>
<h2>📝 License</h2>
<p>MIT © 2025 Fizzwiz</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-core.html">core</a></li><li><a href="module-error.html">error</a></li><li><a href="module-handler.html">handler</a></li><li><a href="module-util.html">util</a></li></ul><h3>Classes</h3><ul><li><a href="Async.html">Async</a></li><li><a href="DomError.html">DomError</a></li><li><a href="DomHandler.html">DomHandler</a></li><li><a href="Handler.html">Handler</a></li><li><a href="HandlerError.html">HandlerError</a></li><li><a href="HttpError.html">HttpError</a></li><li><a href="HttpHandler.html">HttpHandler</a></li><li><a href="Path.html">Path</a></li><li><a href="Req.html">Req</a></li><li><a href="Res.html">Res</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Sep 25 2025 18:34:50 GMT+0200 (Ora legale dell’Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>