<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>⏳ @fizzwiz/awaitility</h1>
<blockquote>
<p>Essential utilities for asynchronous workflows.</p>
</blockquote>
<hr>
<h2>🌐 Overview</h2>
<p><code>@fizzwiz/awaitility</code> provides a set of <strong>chainable, context-aware handlers</strong> for general data structures, DOM manipulation, and HTTP workflows.
It simplifies <strong>asynchronous operations</strong>, <strong>nested context navigation</strong>, and <strong>error handling</strong>, offering a clean, fluent API.</p>
<p>This library is designed to <strong>keep business logic in focus</strong>: your main operations are expressed as top-level code, while <strong>error handling is nested and orthogonalized</strong> into listeners or automatically managed (e.g., by <code>Servler</code>).</p>
<hr>
<h2>⚡ Features</h2>
<ul>
<li>🛠 <strong>Handler</strong>: Base class for chainable operations with synchronous and asynchronous checks.</li>
<li>🌳 <strong>Domler</strong>: Chainable DOM navigation and async mutation.</li>
<li>📡 <strong>Servler</strong>: Simplified HTTP request/response handling.</li>
<li>⏱ <strong>Async</strong>: Utilities for asynchronous workflows.</li>
<li>📨 <strong>Req / Res</strong>: Minimal request and response utilities.</li>
<li>🗂 <strong>Path</strong>: Utilities for working with nested objects or URLs.</li>
</ul>
<hr>
<h2>📦 Installation</h2>
<pre class="prettyprint source lang-bash"><code>npm install @fizzwiz/awaitility
</code></pre>
<hr>
<h2>🚀 Usage</h2>
<h3>🛠 Handler</h3>
<pre class="prettyprint source lang-js"><code>import { Handler } from &quot;@fizzwiz/awaitility&quot;;

const data = { user: { name: &quot;Alice&quot; } };
const defaultError = { message: &quot;handler-fail&quot; };

const h = new Handler(data, defaultError)
  .on(&quot;handler-fail&quot;, err => /* handle general failure */)
  .on(&quot;handler-fail:wrong-name&quot;, err => /* handle specific failure */)
  .with(&quot;user&quot;)
  .check(ctx => ctx.name === &quot;Alice&quot;, { message: &quot;wrong-name&quot; })  // Second argument = error thrown if the predicate fails
  .set(&quot;age&quot;, 30);

// Errors are handled by listeners
if (!h.ok) return;

// Business logic in focus here
console.log(&quot;✅ Context:&quot;, h.ctx); // { name: &quot;Alice&quot;, age: 30 }
</code></pre>
<hr>
<h3>🌳 Domler</h3>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;module&quot;>
  import { Domler } from &quot;@fizzwiz/awaitility&quot;;

  async function handler(event) {
    const h = new Domler(document)
      .on(&quot;fetch-html-fail&quot;, err => /* handle fetch failure */)
      .withQuery(&quot;#container&quot;)
      .setAttr(&quot;data-id&quot;, &quot;123&quot;);

    await h.asyncSetHTML(
      async () => fetch(&quot;/snippet.html&quot;).then(res => res.text()),
      { message: &quot;fetch-html-fail&quot; }
    );

    // Errors are handled by listeners
    if (!h.ok) return;

    // Business logic in focus here
  }
&lt;/script>
</code></pre>
<hr>
<h3>📡 Servler</h3>
<pre class="prettyprint source lang-js"><code>import { Servler, Res } from &quot;@fizzwiz/awaitility&quot;;

// Example: a framework-agnostic route handler
async function handler(req, res) {
  const h = new Servler({ req, res });

  h
    .checkMethod(&quot;POST&quot;)
    .checkContentType(/application\/json/)   // Require JSON body
    .checkAccept(/application\/json/)       // Client must accept JSON
    .prepareQuery()                          // Attach req.query if missing
    .prepareCookies();                       // Attach req.cookies if missing

  // Attach req.body (async operation) if missing
  await h.prepareBody();   

  // Errors are auto-converted to Notifications and sent to the client
  if (!h.ok) return;

  // Business logic in focus here
  const result = { success: true };

  // Send JSON response
  Res.json(res, 200, result);
}
</code></pre>
<hr>
<h2>📚 API Reference</h2>
<h3>🛠 Handler</h3>
<ul>
<li><code>with(path, error?, onError?, creating?)</code> - Navigate into a nested object.</li>
<li><code>without(nsteps?)</code> - Step back in the path stack.</li>
<li><code>get(path?, creating?)</code> - Get a nested property.</li>
<li><code>set(path, value, error?, onError?, creating?)</code> - Set a property.</li>
<li><code>asyncSet(path, value, error?, onError?, creating?)</code> - Set a property asynchronously.</li>
<li><code>check(predicate, error?, onError?)</code> - Synchronous check.</li>
<li><code>asyncCheck(predicate, error?, onError?)</code> - Asynchronous check.</li>
<li><code>exec(fn, error?, onError?)</code> - Synchronous side-effect function.</li>
<li><code>asyncExec(fn, error?, onError?)</code> - Asynchronous side-effect function.</li>
<li><code>fail(err, cause?, onError?)</code> - Fail handler and emit enriched error.</li>
</ul>
<h3>🌳 Domler</h3>
<ul>
<li>Extends <code>Handler</code>.</li>
<li><code>withQuery(selector, error?, onError?)</code> - Navigate DOM element by CSS selector.</li>
<li><code>setText(value, error?, onError?)</code> - Set <code>textContent</code>.</li>
<li><code>setHTML(html, error?, onError?)</code> - Set <code>innerHTML</code>.</li>
<li><code>setAttr(attr, value, error?, onError?)</code> - Set attribute.</li>
<li>Async equivalents: <code>asyncSetText</code>, <code>asyncSetHTML</code>, <code>asyncSetAttr</code>.</li>
</ul>
<h3>📡 Servler</h3>
<ul>
<li><code>prepareBody()</code>, <code>prepareQuery()</code>, <code>prepareToken()</code>, <code>checkMethod()</code>, <code>checkToken()</code>, <code>checkQueryParam()</code>, <code>checkCookie()</code>, <code>checkHeader()</code>, <code>checkContentType()</code>, <code>checkAccept()</code></li>
<li>By default, errors are converted into a <code>Notification</code> instance sent automatically to the client.</li>
</ul>
<hr>
<h2>🤝 Contributing</h2>
<p>Contributions, bug reports, and feature requests are welcome!
Please open issues or pull requests on the <a href="https://github.com/fizzwiz/awaitility">GitHub repository</a>.</p>
<hr>
<h2>📖 Tutorials and Learning</h2>
<p>Check the 👉 <a href="http://awaitility-js.blogspot.com">blog</a> for tutorials and in-depth examples.</p>
<hr>
<h2>📝 License</h2>
<p>MIT © 2025 Fizzwiz</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-core.html">core</a></li><li><a href="module-error.html">error</a></li><li><a href="module-handler.html">handler</a></li><li><a href="module-util.html">util</a></li></ul><h3>Classes</h3><ul><li><a href="Async.html">Async</a></li><li><a href="DomError.html">DomError</a></li><li><a href="DomHandler.html">DomHandler</a></li><li><a href="Handler.html">Handler</a></li><li><a href="HandlerError.html">HandlerError</a></li><li><a href="HttpError.html">HttpError</a></li><li><a href="HttpHandler.html">HttpHandler</a></li><li><a href="Path.html">Path</a></li><li><a href="Req.html">Req</a></li><li><a href="Res.html">Res</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Sep 25 2025 15:08:03 GMT+0200 (Ora legale dell’Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>